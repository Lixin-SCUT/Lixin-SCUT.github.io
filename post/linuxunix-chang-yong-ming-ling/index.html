<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linux/Unix常用命令 | Lixin-SCUT</title>
<link rel="shortcut icon" href="https://lixin-scut.github.io//favicon.ico?v=1584355317311">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://lixin-scut.github.io//styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://lixin-scut.github.io/">
  <img class="avatar" src="https://lixin-scut.github.io//images/avatar.png?v=1584355317311" alt="">
  </a>
  <h1 class="site-title">
    Lixin-SCUT
  </h1>
  <p class="site-description">
    In the darkest night,rising like a spire.
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          时间轴
        </a>
      
    
      
        <a href="/tags" class="menu">
          分类/标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>


        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Linux/Unix常用命令
            </h2>
            <div class="post-info">
              <time class="post-time">
                · 2020-03-04 ·
              </time>
              
                <a href="https://lixin-scut.github.io//tag/caA4UQ2wC" class="post-tag">
                  # 操作系统/Linux
                </a>
              
            </div>
            
            <div class="post-content">
              <p>这篇博文主要是为了方便自己查看常用命令，并总结一些已有命令的特点和详情。<br>
因为我常用的的系统是macOS和Ubuntu（或者CentOS），所以某些细节可能会有出入</p>
<h2 id="日常管理用命令">日常管理用命令</h2>
<p><strong>ps</strong><br>
观察系统所有的进程数据[root@study ~]# ps aux<br>
也是能够观察所有系统的数据[root@study ~]# ps -lA<br>
连同部分进程树状态[root@study ~]# ps axjf<br>
仅观察自己的 bash 相关进程： ps -l<br>
选项与参数:<br>
-A :所有的 process 均显示出来，与 -e 具有同样的效用; -a :不与 terminal 有关的所有 process ;<br>
-u :有效使用者 (effective user) 相关的 process ; x :通常与 a 这个参数一起使用，可列出较完整信息。 输出格式规划:<br>
l :较长、较详细的将该 PID 的的信息列出;<br>
j :工作的格式 (jobs format) -f :做一个更为完整的输出。</p>
<p><strong>top</strong><br>
动态观察进程的变化<br>
top 预设使用 CPU 使用率 (%CPU) 作为排序的重点，如果你想要使用内存使用率排序，则可以按 下『M』<br>
选项与参数:<br>
-d :后面可以接秒数，就是整个进程画面更新的秒数。预设是 5 秒;<br>
-b :以批次的方式执行 top ，还有更多的参数可以使用喔! 通常会搭配数据流重导向来将批次的结果输出成为文件。<br>
-n :与 -b 搭配，意义是，需要进行几次 top 的输出结果。 -p :指定某些个 PID 来进行观察监测而已。<br>
在 top 执行过程当中可以使用的按键指令:<br>
? :显示在 top 当中可以输入的按键指令; P :以 CPU 的使用资源排序显示;<br>
M :以 Memory 的使用资源排序显示;<br>
N :以 PID 来排序喔!<br>
T :由该 Process 使用的 CPU 时间累积 (TIME+) 排序。 k :给予某个 PID 一个讯号 (signal)<br>
r :给予某个 PID 重新制订一个 nice 值。 q :离开 top 软件的按键。</p>
<h2 id="vim编辑命令">VIM编辑命令</h2>
<h2 id="网络检测专用命令">网络检测专用命令</h2>
<p>netstat<br>
用于显示各种网络相关信息，如网络连接，路由表，接口状态，无效连接，组播成员 等等。<br>
命令行选项：<br>
-a:　　列出系统中所有网络连接，包括已经连接的网络服务、监听的网络服务和Socket套接字<br>
-t：　　列出TCP数据<br>
-u：　　列出UDP数据<br>
-l：　　列出正在监听的网络服务（不包含已经连接的网路服务）<br>
-n：　　用端口显示服务，而不用服务名<br>
-p：　　列出该服务的进程ID(PID)</p>
<p>例子：netstat -tlunp<br>
除了可以列出监听网络的接口与状态之外，最后一个字段还能够显示此服务的PID 号码以及进程的指令名称<br>
互联网联机字段:<br>
 Proto :网络的封包协议，主要分为 TCP 与 UDP 封包，相关资料请参考服务器篇;<br>
 Recv-Q:非由用户程序链接到此 socket 的复制的总 bytes 数;<br>
 Send-Q:非由远程主机传送过来的 acknowledged 总 bytes 数;<br>
 Local Address :本地端的 IP:port 情况<br>
 Foreign Address:远程主机的 IP:port 情况<br>
 State :联机状态，主要有建立(ESTABLISED)及监听(LISTEN);</p>
<h2 id="命令详解">命令详解</h2>
<p><strong>ps</strong><br>
将某个时间点的进程运作情况撷取下来<br>
选项与参数：<br>
-A ：所有的 process 均显示出来，与 -e 具有同样的效用；<br>
-a ：不与 terminal 有关的所有 process ；<br>
-u ：有效使用者 (effective user) 相关的 process ；<br>
x ：通常与 a 这个参数一起使用，可列出较完整信息。<br>
输出格式规划：<br>
l ：较长、较详细的将该 PID 的的信息列出；<br>
j ：工作的格式 (jobs format)<br>
-f ：做一个更为完整的输出。<br>
观察系统所有的进程数据[root@study ~]# ps aux<br>
也是能够观察所有系统的数据[root@study ~]# ps -lA<br>
连同部分进程树状态[root@study ~]# ps axjf</p>
<p>重点：<br>
只能查阅自己 bash 进程的『 ps -l 』<br>
可以查阅所有系统运作的进程『 ps aux 』</p>
<p>但是ps -l 与 ps aux 显示的项目并不相同</p>
<p>仅观察自己的 bash 相关进程： ps -l<br>
F：代表这个进程旗标 (process flags)，说明这个进程的总结权限，常见号码有：<br>
若为 4 表示此进程的权限为 root ；<br>
若为 1 则表示此子进程仅进行复制(fork)而没有实际执行(exec)。<br>
 S：代表这个进程的状态 (STAT)，主要的状态有：<br>
R (Running)：该程序正在运作中；<br>
S (Sleep)：该程序目前正在睡眠状态(idle)，但可以被唤醒(signal)。<br>
D ：不可被唤醒的睡眠状态，通常这支程序可能在等待 I/O 的情况(ex&gt;打印)<br>
T ：停止状态(stop)，可能是在工作控制(背景暂停)或除错 (traced) 状态；<br>
Z (Zombie)：僵尸状态，进程已经终止但却无法被移除至内存外。<br>
 UID/PID/PPID：代表『此进程被该 UID 所拥有/进程的 PID 号码/此进程的父进程 PID 号码』<br>
 C：代表 CPU 使用率，单位为百分比；<br>
 PRI/NI：Priority/Nice 的缩写，代表此进程被 CPU 所执行的优先级，数值越小代表该进程越快被 CPU 执行。详细的 PRI 与 NI 将在下一小节说明。<br>
 ADDR/SZ/WCHAN：都与内存有关，ADDR 是 kernel function，指出该进程在内存的哪个部分，如果是个running 的进程，一般就会显示『 - 』 / SZ 代表此进程用掉多少内存 / WCHAN 表示目前进程是否运作中，同样的， 若为 - 表示正在运作中。<br>
 TTY：登入者的终端机位置，若为远程登录则使用动态终端接口 (pts/n)；<br>
 TIME：使用掉的 CPU 时间，注意，是此进程实际花费 CPU 运作的时间，而不是系统时间；<br>
 CMD：就是 command 的缩写，造成此进程的触发程序之指令为何。</p>
<p>观察系统所有进程： ps aux<br>
各字段的意义为：<br>
 USER：该 process 属于那个使用者账号的？<br>
 PID ：该 process 的进程标识符。<br>
 %CPU：该 process 使用掉的 CPU 资源百分比；<br>
 %MEM：该 process 所占用的物理内存百分比；<br>
 VSZ ：该 process 使用掉的虚拟内存量 (Kbytes)<br>
 RSS ：该 process 占用的固定的内存量 (Kbytes)<br>
 TTY ：该 process 是在那个终端机上面运作，若与终端机无关则显示 ?，另外， tty1-tty6 是本机上面的登<br>
入者进程，若为 pts/0 等等的，则表示为由网络连接进主机的进程。<br>
 STAT：该进程目前的状态，状态显示与 ps -l 的 S 旗标相同 (R/S/T/Z)<br>
 START：该 process 被触发启动的时间；<br>
 TIME ：该 process 实际使用 CPU 运作的时间。<br>
 COMMAND：该进程的实际指令为何？</p>
<p>『僵尸 (zombie) 』进程<br>
造成僵尸进程的成因是因为该进程应该已经执行完毕，或者是因故应该要终止了， 但是该进程的父进程却无法完整的将该进程结束掉，而造成那个进程一直存在内存当中。<br>
如果你发现在某个进程的 CMD 后面还接上<code>&lt;defunct&gt;</code>时，就代表该进程是僵尸进程<br>
重点<br>
不要仅仅将僵尸进程 kill 掉而已，要找出该进程的父进程</p>
<p><strong>top</strong><br>
top 主要分为两个画面，上面的画面为整个系统的资源使用状态，基本上总共有六行， 显示的内容依序是:<br>
 第一行(top...):这一行显示的信息分别为:<br>
o 目前的时间，亦即是 00:53:59 那个项目;<br>
o 开机到目前为止所经过的时间，亦即是 up 6:07, 那个项目;<br>
o 已经登入系统的用户人数，亦即是 3 users, 项目;<br>
o 系统在 1, 5, 15 分钟的平均工作负载。我们在第十五章谈到的 batch 工作方式为负载小于 0.8 就是<br>
这个负载啰!代表的是 1, 5, 15 分钟，系统平均要负责运作几个进程(工作)的意思。 越小代表系统 越闲置，若高于 1 得要注意你的系统进程是否太过繁复了!</p>
<p> 第二行(Tasks...):显示的是目前进程的总量与个别进程在什么状态(running, sleeping, stopped, zombie)。 比较 需要注意的是最后的 zombie 那个数值，如果不是 0 !好好看看到底是那个 process 变成僵尸了吧?<br>
 第三行(%Cpus...):显示的是 CPU 的整体负载，每个项目可使用 ? 查阅。需要特别注意的是 wa 项目，那 个项目代表的是 I/O wait， 通常你的系统会变慢都是 I/O 产生的问题比较大!因此这里得要注意这个项目 耗用 CPU 的资源喔! 另外，如果是多核心的设备，可以按下数字键『1』来切换成不同 CPU 的负载率。<br>
 第四行与第五行:表示目前的物理内存与虚拟内存 (Mem/Swap) 的使用情况。 再次重申，要注意的是 swap 的使用量要尽量的少!如果 swap 被用的很大量，表示系统的物理内存实在不足!<br>
 第六行:这个是当在 top 程序当中输入指令时，显示状态的地方。<br>
至于 top 下半部分的画面，则是每个 process 使用的资源情况。比较需要注意的是:<br>
 PID :每个 process 的 ID 啦!<br>
 USER:该 process 所属的使用者;<br>
 PR :Priority 的简写，进程的优先执行顺序，越小越早被执行;<br>
 NI :Nice 的简写，与 Priority 有关，也是越小越早被执行;<br>
 %CPU:CPU 的使用率;<br>
 %MEM:内存的使用率;<br>
 TIME+:CPU 使用时间的累加;</p>

            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://lixin-scut.github.io//post/jing-tai-lian-jie-yu-dong-tai-lian-jie-lian-jie">
              <h3 class="post-title">
                静态链接与动态链接-链接
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '253c8689f3b11b51dcf1',
    clientSecret: '64df7c097665e7dd6f416ecfaba36581a91bdb63',
    repo: 'Lixin-SCUT.github.io',
    owner: 'Lixin-SCUT',
    admin: ['Lixin-SCUT'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://lixin-scut.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
