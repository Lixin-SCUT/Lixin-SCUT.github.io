<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title> [Linux基础] 文件与目录管理（鸟哥Linux第六章） | Lixin-SCUT</title>
<link rel="shortcut icon" href="https://lixin-scut.github.io//favicon.ico?v=1584602760575">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://lixin-scut.github.io//styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://lixin-scut.github.io/">
  <img class="avatar" src="https://lixin-scut.github.io//images/avatar.png?v=1584602760575" alt="">
  </a>
  <h1 class="site-title">
    Lixin-SCUT
  </h1>
  <p class="site-description">
    千里之行，始于足下。不积跬步，无以至千里。
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          时间轴
        </a>
      
    
      
        <a href="/tags" class="menu">
          分类/标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>


        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
               [Linux基础] 文件与目录管理（鸟哥Linux第六章）
            </h2>
            <div class="post-info">
              <time class="post-time">
                · 2019-12-30 ·
              </time>
              
                <a href="https://lixin-scut.github.io//tag/i1p_xiuAc" class="post-tag">
                  # Linux基础
                </a>
              
                <a href="https://lixin-scut.github.io//tag/FaScKSk5i" class="post-tag">
                  # 读书笔记
                </a>
              
            </div>
            
            <div class="post-content">
              <p>绝对路径：路径的写法『一定由根目录 / 写起』<br>
相对路径：路径的写法『不是由 / 写起』</p>
<ul>
<li>目录的相关操作<br>
. 代表此层目录<br>
.. 代表上一层目录<br>
-代表前一个工作目录<br>
~ 代表『目前用户身份』所在的家目录<br>
~account 代表 account 这个用户的家目录(account 是个账号名称)</li>
</ul>
<p>在所有目录底下都会存在的两个目录，分别是『.』与『..』 分别代表此层与上层<br>
目录的意思。</p>
<p>几个常见的处理目录的指令：<br>
•  cd：变换目录<br>
cd 是 Change Directory 的缩写</p>
<p>•  pwd：显示当前目录<br>
-P ：显示出确实的路径，而非使用链接 (link) 路径。<br>
pwd 是 Print Working Directory 的缩写，也就是显示目前所在目录的指令</p>
<p>•  mkdir：建立一个新的目录<br>
-m ：配置文件案的权限喔！直接设定，不需要看预设权限 (umask) 的脸色<br>
-p ：帮助你直接将所需要的目录(包含上层目录)递归建立起来！</p>
<p>•  rmdir：删除一个空的目录<br>
-p ：连同『上层』『空的』目录也一起删除<br>
目录需要一层一层的删除才行！而且被删除的目录里面必定不能存在其他的目录或文 件<br>
那如果要将所有目录下的东西都杀掉就必须使用『 rm -r test 』</p>
<ul>
<li>关于执行文件路径的变量： $PATH<br>
echo <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>A</mi><mi>T</mi><mi>H</mi><mi mathvariant="normal">环</mi><mi mathvariant="normal">境</mi><mi mathvariant="normal">变</mi><mi mathvariant="normal">量</mi><mi mathvariant="normal">打</mi><mi mathvariant="normal">印</mi><mi mathvariant="normal">，</mi><mi>e</mi><mi>c</mi><mi>h</mi><mi>o</mi><mi mathvariant="normal">有</mi><mi mathvariant="normal">『</mi><mi mathvariant="normal">显</mi><mi mathvariant="normal">示</mi><mi mathvariant="normal">、</mi><mi mathvariant="normal">印</mi><mi mathvariant="normal">出</mi><mi mathvariant="normal">』</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">，</mi></mrow><annotation encoding="application/x-tex">PATH 环境变量打印，echo 有『显示、印出』的，</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord cjk_fallback">环</span><span class="mord cjk_fallback">境</span><span class="mord cjk_fallback">变</span><span class="mord cjk_fallback">量</span><span class="mord cjk_fallback">打</span><span class="mord cjk_fallback">印</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">『</span><span class="mord cjk_fallback">显</span><span class="mord cjk_fallback">示</span><span class="mord cjk_fallback">、</span><span class="mord cjk_fallback">印</span><span class="mord cjk_fallback">出</span><span class="mord cjk_fallback">』</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">，</span></span></span></span> 表示后面接的是变量<br>
PATH(一定是大写)这个变量的内容是由一堆目录所组成的，每个目录中间用冒号(:)来隔开， 每个目 录是有『顺序』之分的。</li>
</ul>
<p>修改PATH：[root@study ~]#PATH=&quot;${PATH}:/root&quot; (将/root 加入 PATH 当中)</p>
<p>为了安全起见，不建议将当前目录『.』加入 PATH 的搜寻目录中。</p>
<ul>
<li>
<p>文件与目录管理<br>
文件与目录的检视： ls<br>
选项与参数：<br>
<strong>-a ：全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用)</strong><br>
-A ：全部的文件，连同隐藏档，但不包括 . 与 .. 这两个目录<br>
<strong>-d ：仅列出目录本身，而不是列出目录内的文件数据(常用)</strong><br>
-f ：直接列出结果，而不进行排序 (ls 预设会以档名排序！)<br>
-F ：根据文件、目录等信息，给予附加数据结构，例如：* :代表可执行文件； /:代表目录； =:代表 socket 文件； |:代表 FIFO 文件；<br>
-h ：将文件容量以人类较易读的方式(例如 GB, KB 等等)列出来；<br>
-i ：列出 inode 号码，inode 的意义下一章将会介绍；<br>
<strong>-l ：长数据串行出，包含文件的属性与权限等等数据；(常用)</strong><br>
-n ：列出 UID 与 GID 而非使用者与群组的名称 (UID 与 GID 会在账号管理提到！)<br>
-r ：将排序结果反向输出，例如：原本档名由小到大，反向则为由大到小；<br>
-R ：连同子目录内容一起列出来，等于该目录下的所有文件都会显示出来；<br>
-S ：以文件容量大小排序，而不是用档名排序；<br>
-t ：依时间排序，而不是用档名。<br>
--color=never ：不要依据文件特性给予颜色显示；<br>
--color=always ：显示颜色<br>
--color=auto ：让系统自行依据设定来判断是否给予颜色<br>
--full-time ：以完整时间模式 (包含年、月、日、时、分) 输出<br>
--time={atime,ctime} ：输出 access 时间或改变权限属性时间 (ctime)<br>
而非内容变更时间 (modification time)<br>
当你只有下达 ls 时，默认显示的只有：非隐藏档的档名、 以档名进行排序及文件名代表的颜色显示</p>
</li>
<li>
<p>复制、删除与移动： cp, rm, mv<br>
cp ( 复制 文件 或目录)<br>
<strong>-a ：相当于 -dr --preserve=all 的意思，至于 dr 请参考下列说明；(常用)</strong><br>
-d ：若来源文件为链接文件的属性(link file)，则复制链接文件属性而非文件本身；<br>
-f ：为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；<br>
<strong>-i ：若目标文件(destination)已经存在时，在覆盖时会先询问动作的进行(常用)</strong><br>
-l ：进行硬式连结(hard link)的连结档建立，而非复制文件本身；<br>
<strong>-p ：连同文件的属性(权限、用户、时间)一起复制过去，而非使用默认属性(备份常用)；</strong><br>
<strong>-r ：递归持续复制，用于目录的复制行为；(常用)</strong><br>
-s ：复制成为符号链接文件 (symbolic link)，亦即『快捷方式』文件；<br>
-u ：destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制。（在目标文件与来源文件有差异时，才会复制，比较常被用于『备份』的工作）<br>
--preserve=all ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links,xattr 等也复制了。</p>
</li>
</ul>
<p>如果来源档有两个以上，则最后一个目的文件一定要是『目录』<br>
在预设的条件中， cp 的来源档与目的档的权限是不同的，目的档的拥有者通常会是指令操作者本身。</p>
<p>使用 -l 及 -s 都会建立所谓的连结档(link file)，但是这两种连结档却有不一样的 情况。那个 -l 就是所谓的实体链接(hard link)，至于 -s 则是符号链接(symbolic link)，符号链接(symbolic link)是一个『快捷方式』，实体链接(hard link) 与 bashrc 的属性与权限完全一模一样，与尚未进行连结前的差异则是第二栏的 link 数由 1 变成 2</p>
<ul>
<li>rm ( 移除文件或目录)<br>
选项与参数：<br>
-f ：就是 force 的意思，忽略不存在的文件，不会出现警告讯息；<br>
-i ：互动模式，在删除前会询问使用者是否动作<br>
-r ：递归删除啊！最常用在目录的删除了！这是非常危险的选项！！</li>
</ul>
<p>使用『 rm -r 』这个指令之前，请千万注 意了，因为该目录或文件『肯定』会被 root 杀掉！</p>
<ul>
<li>
<p>mv ( 移动文件与目录，或更名)<br>
选项与参数：<br>
-f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；<br>
-i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！<br>
-u ：若目标文件已经存在，且 source 比较新，才会更新 (update)</p>
</li>
<li>
<p>取得路径的文件名与目录名称</p>
</li>
</ul>
<p>[root@study ~]#  basename /etc/sysconfig/network<br>
network &lt;== 很简单！就取得最后的档名～<br>
[root@study ~]#  dirname /etc/sysconfig/network<br>
/etc/sysconfig &lt;== 取得的变成目录名了！</p>
<ul>
<li>文件内容查阅<br>
查阅一个文件的内容：<br>
•  cat 由第一行开始显示文件内容<br>
•  tac 从最后一行开始显示，可以看出 tac 是 cat 的倒着写！<br>
•  nl 显示的时候，顺道输出行号！<br>
•  more 一页一页的显示文件内容<br>
•  less 与 more 类似，但是比 more 更好的是，他可以往前翻页！<br>
•  head 只看头几行<br>
•  tail 只看尾巴几行<br>
•  od 以二进制的方式读取文件内容！</li>
</ul>
<p>在 more 的时候，我们并没有办法向前面翻， 只能往后面看，但若使用了 less 时，就可以使用 [pageup] [pagedown] 等按键的功能来往前往后翻看文件<br>
在 less 里头可以拥有更多的『搜寻』功能，不止可以向下搜寻，也可以向上搜寻<br>
man 这个指令就是呼叫 less 来显示说明文件的内容的</p>
<ul>
<li>修改文件时间或建置新档： touch</li>
</ul>
<ul>
<li>modification time (mtime)： 当该文件的『内容数据』变更时，就会更新这个时间！内容数据指的是文件的内容，而不是文件的属性或 权限喔！</li>
<li>status time (ctime)： 当该文件的『状态 (status)』改变时，就会更新这个时间，举例来说，像是权限与属性被更改了，都会更新 这个时间啊。</li>
<li>access time (atime)： 当『该文件的内容被取用』时，就会更新这个读取时间 (access)。举例来说，我们使用 cat 去读取 /etc/man_db.conf ， 就会更新该文件的 atime 了。<br>
在默认的情况下，ls 显示出来的是该文件的 mtime ，也就是这个文件的内容上次被更动 的时间。</li>
</ul>
<p>时间修改指令：<br>
[root@study ~]#  touch [-acdmt]  文件<br>
选项与参数：<br>
-a ：仅修订 access time；<br>
-c ：仅修改文件的时间，若该文件不存在则不建立新文件；<br>
-d ：后面可以接欲修订的日期而不用目前的日期，也可以使用 --date=&quot;日期或时间&quot;<br>
-m ：仅修改 mtime ；<br>
-t ：后面可以接欲修订的时间而不用目前的时间，格式为[YYYYMMDDhhmm]</p>
<p>如果 touch 后面有接文件，则该文件的三个时间 (atime/ctime/mtime) 都会更新为目前的时间。若该文件不存在， 则会主动的建立一个新的空的文件</p>
<p>touch 这个指令最常被使用的情况是：<br>
•  建立一个空的文件；<br>
•  将某个文件日期修订为目前 (mtime 与 atime)</p>
<ul>
<li>文件与目录的默认权限与隐藏权限<br>
新增一个文件或目录时，默认的权限</li>
</ul>
<p>文件预设权限：umask<br>
umask 就是指定 『目前用户在建立文件或目录时候的权限默认值』<br>
查阅的方式有两种，一种可以直接输入 umask ，就可以看到数字型态的权限设定分数， 一种则是加入 -S (Symbolic) 这个选项，就会以符号类型的方式来显示出权限</p>
<p><strong>umask 的分数指的是『该默认值需要减掉的权限！』</strong></p>
<p>设定 umask ：直接在 umask 后面输入 需要减去的权限值就好了</p>
<ul>
<li>文件隐藏属性<br>
chattr ( 配置文件案隐藏属性) chattr [+-=][ASacdistu]  文件 或目 录 名 称<br>
+：增加某一个特殊参数，其他原本存在参数则不动。<br>
-：移除某一个特殊参数，其他原本存在参数则不动。<br>
= ：设定一定，且仅有后面接的参数</li>
</ul>
<p>a ：当设定 a 之后，这个文件将只能增加数据，而不能删除也不能修改数据，只有 root 才能设定这属性<br>
i ：这个 i 可就很厉害了！他可以让一个文件『不能被删除、改名、设定连结也无法写入或新增数据！』对于系统安全性有相当大的帮助！只有 root 能设定此属性</p>
<p>lsattr ( 显示文件隐藏属性)</p>
<ul>
<li>文件特殊权限： SUID, SGID, SBIT</li>
</ul>
<ol>
<li>
<p>Set UID : s 这个标志会出现在文件拥有者的 x 权限上，被称为 Set UID，简称为 SUID 的特殊权限<br>
基本上 SUID 有这样的限制与功能：<br>
•  SUID 权限仅对二进制程序(binary program)有效；<br>
•  执行者对于该程序需要具有 x 的可执行权限；<br>
•  本权限仅在执行该程序的过程中有效 (run-time)；<br>
•  执行者将具有该<strong>程序拥有者 (owner) 的权限</strong>。<br>
<img src="https://lixin-scut.github.io//post-images/1577711413192.png" alt=""><br>
SUID 仅可用在 binary program 上， 不能够用在 shell script 上面<br>
SUID 对于目录也是无效的</p>
</li>
<li>
<p>Set GID<br>
s 在群组的 x 时则称为 Set GID, SGID<br>
与 SUID 不同的是，SGID 可以针对文件或目录来设定<br>
如果是对文件来说， SGID 有如下的功能：<br>
•  SGID 对二进制程序有用；<br>
•  程序执行者对于该程序来说，需具备 x 的权限；<br>
•  执行者在执行的过程中将会获得该程序群组的支持！</p>
</li>
</ol>
<p>当一个目录设定了 SGID 的权限后，他将具有如下的功能：<br>
•  用户若对于此目录具有 r 与 x 的权限时，该用户能够进入此目录；<br>
•  用户在此目录下的有效群组(effective group)将会变成该目录的群组；<br>
•  用途：若用户在此目录下具有 w 的权限(可以新建文件)，则使用者所建立的新文件，该新文件的群组与此目录的群组相同</p>
<ol start="3">
<li>Sticky Bit<br>
Sticky Bit, SBIT 目前只针对目录有效，对于文件已经没有效果了<br>
SBIT 对于目录的作用是：<br>
•  当用户对于此目录具有 w, x 权限，亦即具有写入的权限时；<br>
•  当用户在该目录下建立文件或目录时，仅有自己与 root 才有权力删除该文件</li>
</ol>
<ul>
<li>
<p>SUID/SGID/SBIT权限设定<br>
数字型态更改权限的方式为『三个数字』的组合， 那么如果在这三个数字之前再加上一个数字的话，最前面的那个数字就代表这几个权限了！<br>
•  4 为 SUID<br>
•  2 为 SGID<br>
•  1 为 SBIT<br>
假设要将一个文件权限改为『-rwsr-xr-x』时，由于 s 在用户权力中，所以是 SUID ，因此， 在原先的 755 之前还要加上 4 ，也就是：『 chmod 4755 filename 』来设定<br>
大写的 S 与 T ： 因为 s 与 t 都是取代 x 这个权限的，但是我们是下达 7666 ！也就是说， user, group 以及others 都没有 x 这个可执行的标志( 因为 666 嘛 )，所以这个 S, T 代表的就是『空的』。SUID 是表示『该文件在执行的时候，具有文件拥有者的权限』，但是文件 拥有者都无法执行了当然就是空的<br>
而除了数字法之外，也可以透过符号法来处理，其中 SUID 为 u+s ，而 SGID 为 g+s ，SBIT则是 o+t</p>
</li>
<li>
<p>观察文件类型：file<br>
想要知道某个文件的基本数据，例如是属于 ASCII 或者是 data 文件，或者是 binary ， 且其中有没有使用到动态函式库 (share library) 等等的信息，就可以利用 file 这个指令来检阅</p>
</li>
<li>
<p>指令与 文件 的搜寻</p>
</li>
</ul>
<p>脚本文件名的搜寻<br>
指令的完整文件名和位置，透过 which或 type 来找寻</p>
<p>which 指令是根据『PATH』这个环境变量所规范的路径，去搜寻『执行档』的档名，所以找不到history 等『bash 内建的指令』,若加上 -a 选项，则可以列出所有的可以找到的同名执行文件，而非仅显示第一个</p>
<ul>
<li>文件档名的搜寻<br>
Linux 的搜寻指令find 不很常用的，因为速度慢之外， 也很操硬盘！一般我们都是先使用 whereis 或者是 locate 来检查，如果真的找不到了，才以 find 来搜寻<br>
因为 whereis 只找系统中某些特定目录底下的文件而已，locate则是利用数据库来搜寻文件名，当然两者就相当的快速， 并且没有实际的搜寻硬盘内的文件系统状态，比较省时间</li>
</ul>
<p>如果你要找的文件是具有特殊属性的，例如 SUID 、文件拥有者、文件大小等等， 那么利用 locate是没有办法达成</p>
<p>搜寻系统中不属于任何人的文件<br>
find /- nouser<br>
透过这个指令，可以轻易的就找出那些不太正常的文件。如果有找到不属于系统任何人的文件时，</p>
<p>find 的特殊功能就是能够进行额外的动作(action)。<br>
<img src="https://lixin-scut.github.io//post-images/1577711985462.png" alt=""><br>
该范例中特殊的地方有 {} 以及 ; 还有 -exec 这个关键词，这些东西的意义为：<br>
•  {} 代表的是『由 find 找到的内容』，如上图所示，find 的结果会被放置到 {} 位置中；<br>
•  -exec 一直到 ; 是关键词，代表 find 额外动作的开始 (-exec) 到结束 (;) ，在这中间的就是 find 指令内的额外动作。 在本例中就是『 ls -l {} 』啰！<br>
•  因为『 ; 』在 bash 环境下是有特殊意义的，因此利用反斜杠来跳脱。</p>

            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://lixin-scut.github.io//post/shu-zu-53-zui-da-zi-xu-he-jian-dan-dong-tai-gui-hua-fen-zhi-fa">
              <h3 class="post-title">
                数组 53. 最大子序和[简单][动态规划][分治法]
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '253c8689f3b11b51dcf1',
    clientSecret: '64df7c097665e7dd6f416ecfaba36581a91bdb63',
    repo: 'Lixin-SCUT.github.io',
    owner: 'Lixin-SCUT',
    admin: ['Lixin-SCUT'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://lixin-scut.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
